---
import { type CollectionEntry, getCollection, render } from "astro:content";
import BlogList from "@/layouts/BlogList.astro";

export async function getStaticPaths() {
    const posts = await getCollection("blog");
    const categories = posts.map((x) => x.data.category);
    const uniqueCategories = [...new Set(categories)];
    return uniqueCategories.map((category) => ({
        params: { category },
        props: {
            posts: posts.filter((x) => x.data.category === category),
        },
    }));
}
type Props = {
    posts: CollectionEntry<"blog">[];
};

const { posts } = Astro.props;
---

<BlogList posts={posts} />
